<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.great.mapping.ControlInterface">
  <!-- 查询所有驾校信息 -->
  <select id="selectAll" resultType="com.great.entity.School">
     select * from tbl_school
  </select>
 
  <!--更新驾校运营状态by学校id -->
  <update id="updateSchoolStateById">
  update tbl_school set school_stateid=#{schoolstate_id} where school_id=#{school_id}
  </update>
  
  
  <!--查看所有教练 -->
  <select id="selectAllTeacher" resultType="com.great.entity.Teacher">
    select  t.*,s.school_name from tbl_teacher t,tbl_school s where t.school_id=s.school_id
  </select>
  
  <!--查看所有教练车信息 -->
  <select id="selectAllCar" resultType="com.great.entity.Car">
    select c.*,s.school_name,t.teacher_name from tbl_car c,
    left join tbl_school s on c.school_id=s.school_id
    left join tbl_teacher t on c.teacher_id=t.teacher_id
  </select>
  
  <!--查询通过教练姓名查教练id -->
  <select id="selectTeacherIdByName" resultType="com.great.entity.Teacher">
     select * from tbl_Teacher where Teacher_name=#{teacher_name}
  </select>
  <!--查看所有学员信息 -->
  <select id="selectAllStudent" resultType="com.great.entity.Student">
     select * from tbl_student 
     <where>
     <if test="student_name!=null and student_name!=''">
         and student_name like concat('%',#{student_name},'%')
     </if>
     <if test="teacher_id!=null and teacher_id!=''">
         and teacher_id=#{teacher_id}
     </if>
     </where>
  </select>
  
  <!-- 查询所有公告信息 -->
  <select id="selectAllMessage" resultType="com.great.entity.Message">
  select * from tbl_message
  </select>
  
  <!--增加公告信息 -->
  <insert id="addMassage">
  insert into tbl_Massage (massage_content,massage_time) values(#{massage_content},#{massage_time})
  </insert>
  
 <!--查询学校运营状态列表 -->
  <select id="selectSchoolState" resultType="com.great.entity.SchoolState">
   select * from tbl_schoolstate 
  </select>
  
  <!--查询驾校申请列表 -->
  <select id="selectSchoolApply" resultType="com.great.entity.SchoolApply">
  select * from tbl_schoolapply
  </select>
  
  <!--更新驾校申请表（审批） -->
  <update id="updateApplyState">
  update tbl_school set schoolapply_state='审核通过' where schoolapply_id=#{schoolapply_id}
  </update>
  </mapper>